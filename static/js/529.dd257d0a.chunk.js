"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[529],{529:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(861),c=n(439),a=n(757),u=n.n(a),s=n(791),o=n(87),i=n(689),f=n(395),p="Movies_SearchMoviesPage__zv1OT",v="Movies_SearchMoviesTitle__O2vbk",h="Movies_SearchMoviesInputForm__epbSd",l="Movies_SearchMoviesButton__lfJST",d="Movies_SearchMoviesForm__zUtNV",m="Movies_SearchMoviesResults__rTYJF",x="Movies_SearchMoviesResultsLink__V56-U",_=n(184);var k=function(){var e=(0,i.TH)(),t=(0,o.lr)(),n=(0,c.Z)(t,2),a=n[0],k=n[1],w=(0,s.useState)(a.get("query")||""),y=(0,c.Z)(w,2),b=y[0],S=y[1],j=(0,s.useState)([]),M=(0,c.Z)(j,2),g=M[0],Z=M[1],N=(0,s.useState)(""),P=(0,c.Z)(N,2),T=P[0],q=P[1],z=(0,s.useCallback)(function(){var e=(0,r.Z)(u().mark((function e(t){var n,r,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.z1)(t);case 3:n=e.sent,r=n.results,c=r.length>0,Z(r),k({query:t}),q(c?"":"No results found for '".concat(t,"'")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),q("Something went wrong. Please try again later.");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[k]);(0,s.useEffect)((function(){var e=a.get("query")||"";S(e),z(e)}),[a,z]);var C=function(e){S(e.target.value)},F=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==b.trim()){e.next=4;break}return q("Please enter a search query"),e.abrupt("return");case 4:z(b);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,_.jsxs)("div",{className:p,children:[(0,_.jsx)("h1",{className:v,children:"Search for Movies"}),(0,_.jsxs)("form",{className:d,onSubmit:F,children:[(0,_.jsx)("input",{className:h,type:"text",value:b,onChange:C,placeholder:"Search for a movie"}),(0,_.jsx)("button",{className:l,type:"submit",children:"Search"}),0===g.length&&T&&(0,_.jsx)("p",{children:T})]}),(0,_.jsx)("ul",{className:m,children:g.map((function(t){return(0,_.jsx)("li",{children:(0,_.jsx)("div",{children:(0,_.jsx)(s.Suspense,{children:C?(0,_.jsx)(o.rU,{className:x,to:"".concat(t.id),state:{from:e},children:t.title}):(0,_.jsx)("h2",{children:t.title})})})},t.id)}))})]})}},395:function(e,t,n){n.d(t,{Df:function(){return o},TP:function(){return f},tx:function(){return v},z1:function(){return i},zv:function(){return p}});var r=n(861),c=n(757),a=n.n(c),u="996f90502411052111a97ebd41f1eb4e",s="https://api.themoviedb.org/3",o=function(){var e=(0,r.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/trending/movie/day?api_key=").concat(u));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/search/movie?api_key=").concat(u,"&query=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/movie/").concat(t,"?api_key=").concat(u));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/movie/").concat(t,"/credits?api_key=").concat(u));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/movie/").concat(t,"/reviews?api_key=").concat(u));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},861:function(e,t,n){function r(e,t,n,r,c,a,u){try{var s=e[a](u),o=s.value}catch(i){return void n(i)}s.done?t(o):Promise.resolve(o).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,a){var u=e.apply(t,n);function s(e){r(u,c,a,s,o,"next",e)}function o(e){r(u,c,a,s,o,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return c}})}}]);
//# sourceMappingURL=529.dd257d0a.chunk.js.map