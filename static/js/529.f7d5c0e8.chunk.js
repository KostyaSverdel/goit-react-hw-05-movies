"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[529],{529:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(861),c=n(439),a=n(757),u=n.n(a),s=n(791),o=n(87),i=n(689),f=n(395),p="Movies_SearchMoviesPage__zv1OT",v="Movies_SearchMoviesTitle__O2vbk",h="Movies_SearchMoviesInputForm__epbSd",l="Movies_SearchMoviesButton__lfJST",d="Movies_SearchMoviesForm__zUtNV",m="Movies_SearchMoviesResults__rTYJF",x="Movies_SearchMoviesResultsLink__V56-U",_=n(184);var k=function(e){var t=(0,i.TH)(),n=(0,o.lr)(),a=(0,c.Z)(n,2),k=a[0],w=a[1],y=(0,s.useState)(k.get("query")||""),b=(0,c.Z)(y,2),S=b[0],j=b[1],M=(0,s.useState)([]),Z=(0,c.Z)(M,2),g=Z[0],N=Z[1],P=(0,s.useState)(""),T=(0,c.Z)(P,2),q=T[0],z=T[1],C=(0,s.useCallback)(function(){var e=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.z1)(t);case 3:n=e.sent,0===(r=n.results).length?z("No results found for '".concat(t,"'")):(z(""),N(r),w({query:t})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),z("Something went wrong. Please try again later.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[w]);(0,s.useEffect)((function(){var e=k.get("query")||"";j(e),C(e)}),[k,C]);var F=function(e){j(e.target.value)},U=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==S.trim()){e.next=4;break}return z("Please enter a search query"),e.abrupt("return");case 4:C(S);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,_.jsxs)("div",{className:p,children:[(0,_.jsx)("h1",{className:v,children:"Search for Movies"}),(0,_.jsxs)("form",{className:d,onSubmit:U,children:[(0,_.jsx)("input",{className:h,type:"text",value:S,onChange:F,placeholder:"Search for a movie"}),(0,_.jsx)("button",{className:l,type:"submit",children:"Search"}),q&&(0,_.jsx)("p",{children:q})]}),(0,_.jsx)("ul",{className:m,children:g.map((function(e){return(0,_.jsx)("li",{children:(0,_.jsx)("div",{children:(0,_.jsx)(s.Suspense,{children:F?(0,_.jsx)(o.rU,{className:x,to:"".concat(e.id),state:t,children:e.title}):(0,_.jsx)("h2",{children:e.title})})})},e.id)}))})]})}},395:function(e,t,n){n.d(t,{Df:function(){return o},TP:function(){return f},tx:function(){return v},z1:function(){return i},zv:function(){return p}});var r=n(861),c=n(757),a=n.n(c),u="996f90502411052111a97ebd41f1eb4e",s="https://api.themoviedb.org/3",o=function(){var e=(0,r.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/trending/movie/day?api_key=").concat(u));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/search/movie?api_key=").concat(u,"&query=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/movie/").concat(t,"?api_key=").concat(u));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/movie/").concat(t,"/credits?api_key=").concat(u));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/movie/").concat(t,"/reviews?api_key=").concat(u));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},861:function(e,t,n){function r(e,t,n,r,c,a,u){try{var s=e[a](u),o=s.value}catch(i){return void n(i)}s.done?t(o):Promise.resolve(o).then(r,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,a){var u=e.apply(t,n);function s(e){r(u,c,a,s,o,"next",e)}function o(e){r(u,c,a,s,o,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return c}})}}]);
//# sourceMappingURL=529.f7d5c0e8.chunk.js.map